services:
  - type: web
    name: electricity-backend
    env: python

    # Run from directory where manage.py is located
    rootDirectory: ./backend/project

    buildCommand: "pip install -r ../requirements.txt && python manage.py migrate && python manage.py collectstatic --noinput"

    startCommand: "gunicorn project.wsgi:application"

    envVars:
      - key: SECRET_KEY
        sync: false
      - key: ALLOWED_HOSTS
        sync: false
      - key: DEBUG
        sync: false
